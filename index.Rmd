---
title: "Chapter 2 Data and Statistics"
output:
  html_document:
    toc: true
    toc_float: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(ggplot2)
library(lubridate)
library(tidyr)
library(lme4)
library(lsmeans)
source(system.file("utils", "allFit.R", package="lme4"))
library(glmmTMB)



source("Scripts/functions.R")
```

# Overview

Chapter 2 data wrangling, data visualization and statistics.

# Data wrangling and clean up
This section creates several .csv files that get used later for stats


### Video data clean up
This section takes the raw datas, wrangles it into three formats, adds covariates and outputs the cleaned data as .csv files which re then sourced in later scripts
```{r, code = readLines("Scripts/videowrangling.R")}
```


### Pan trap data wrangling
This sections takes my long format ID sheet, converts it into wide format that vegan can use and outputs the cleaned data as .csv which are sourced in later scripts

```{r, code = readLines("Scripts/longtowide.R")}
```


### Pan trap diversity calculations
This sections calculates diversity indices and exports full env/metadata .csv 

```{r, code = readLines("Scripts/diversity wrangling.R")}
```


#Statistics and modelling
### Visitation modelling
This is the base hypothesis testing script

```{r, code = readLines("Scripts/visitationmodelling.R")}
```


### RTU visitation modelling
Models for testing RTU-specificity

```{r, code = readLines("Scripts/rtu_visitation_modelling.R")}
```

### Proportion of flowers visited and visit duration modelling

```{r, code = readLines("Scripts/proportion_modelling.R")}
```


### Vegetation Modelling
GLMM for vegetation covariates

```{r, code = readLines("Scripts/vegstats.R")}
```

### Pan traps
These are models for abundance, species richness for pan traps.

```{r, code = readLines("Scripts/pantrapmodelling.R")}
```

### Pan traps simplified RTU viz and models
This chunk tests for differences in bees between treatments. 

```{r, code = readLines("Scripts/simplifiedrtu.R")}
```

###Visitation to L. tridentata
Insitu observation of visitation to L. tridentata

```{r, code = readLines("Scripts/larreavisits.R")}
```


### Pollen
Models and figures for pollen transfer expt

```{r, code = readLines("Scripts/pollen_wrangle.R")}
```

#Figures
Script for making figures

```{r, code = readLines("Scripts/figures.R")}
```


#RII
This code bootstraps 95% confidence intervals

```{r, code = readLines("Scripts/bootallrii.R")}
```

